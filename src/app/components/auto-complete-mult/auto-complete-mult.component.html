@if (label) {
<label class="label" [for]="id"> {{ label }} </label>
}
<div class="position-relative autocomplete-container">
  <input
    [id]="id"
    type="text"
    class="form-control"
    placeholder="{{ placeholder }}"
    [(ngModel)]="query"
    (input)="filterSuggestions()"
    (focus)="openSuggestions()"
    (keydown)="handleKeyDown($event)"
    autocomplete="off"
  />

  <!-- Ícone de limpar o conteúdo -->
  @if(query) {
  <div class="clear-icon" (click)="clearQuery()" title="Limpar">✕</div>
  }

  <!-- Lista de sugestões -->
  @if(isDropdownOpen && dataNoSeleted.length > 0) {
  <div
    class="autocomplete-list"
    [style.max-height]="'200px'"
    style="overflow-y: auto"
  >
    @for(suggestion of filteredSuggestions; track $index) {
    <div
      class="autocomplete-item"
      [class.active]="selectedIndex === $index"
      (click)="selectSuggestion(suggestion)"
      [style.padding.px]="10"
    >
      {{ suggestion[labelView] }}
    </div>
    }
  </div>
  }
</div>

<!-- Botão para abrir modal -->
@if(dataSeleted.length > 0) {
<button class="btn-view-selected" (click)="openModal()" type="button">
  Ver Selecionados ({{ dataSeleted.length }})
</button>
}

<!-- Modal -->
@if(isModalOpen) {
<div class="modal-backdrop" (click)="closeModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>Itens Selecionados</h3>
      <span class="modal-close" (click)="closeModal()" title="Fechar">✕</span>
    </div>
    <div class="modal-body">
      @for(suggestion of dataSeleted; track $index) {
      <div class="selected-item" [style.padding.px]="10">
        {{ suggestion[labelView] }}
        <span
          class="remove-icon"
          (click)="removeSelected(suggestion)"
          title="Remover"
          >✕</span
        >
      </div>
      }
    </div>
  </div>
</div>
}
